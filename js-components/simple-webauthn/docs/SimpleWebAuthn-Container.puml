@startuml SimpleWebAuthn-Container
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

LAYOUT_WITH_LEGEND()

title C4 Container Diagram - SimpleWebAuthn Library Integration

Person(enduser, "End User", "Authenticates using biometric methods")

System_Boundary(webapp, "Web Application Ecosystem") {
    Container(frontend, "Frontend Application", "HTML/CSS/JavaScript", "User interface that integrates SimpleWebAuthn")
    Container(simplewebauthn, "SimpleWebAuthn Library", "JavaScript", "Handles WebAuthn credential management and encryption")
    ContainerDb(storage, "Client Storage", "localStorage/IndexedDB", "Stores credential IDs and encrypted data")
    Container(backend, "Backend API", "REST/GraphQL", "Optional backend for credential management")
}

System_Ext(browser, "Web Browser", "WebAuthn-capable browser")
System_Ext(authenticator, "Platform Authenticator", "Windows Hello, Touch ID, Face ID, etc.")

' Relationships
Rel(enduser, frontend, "Interacts with application")
Rel(frontend, simplewebauthn, "Calls createCredential() and authenticate()")
Rel(simplewebauthn, browser, "Uses WebAuthn API")
Rel(browser, authenticator, "WebAuthn protocol")
Rel(simplewebauthn, storage, "Does NOT auto-store (developer's responsibility)")
Rel(frontend, storage, "Stores credential IDs and encrypted data")
Rel(frontend, backend, "Optional: syncs credential metadata", "HTTPS")

' Technical notes
note right of simplewebauthn : Key Features:\n• PRF extension support\n• Credential ID fallback\n• Platform-specific optimizations\n• Samsung Pass compatibility\n• No localStorage dependencies

note bottom of storage : Developer Responsibility:\n• Store credential.id\n• Store encrypted data\n• Handle credential lifecycle\n• Implement backup/recovery

note right of authenticator : Platform Support:\n• Windows Hello (PRF)\n• Touch ID/Face ID (PRF)\n• Samsung Pass (partial PRF)\n• Android Biometric (PRF)\n• PIN/Pattern fallback

@enduml